<template>
    <div id="user_info">
        <el-avatar class="ava" @click="drawer = true"> {{ userInfo.nickname }} </el-avatar>
        <el-drawer v-model="drawer" title="用户信息" :with-header="false" :direction="'ttb'">
            <div class="drawer_body">
                <div class="header">
                    <div class="half"></div>
                    <el-avatar class="avatar"> {{ userInfo.nickname }} </el-avatar>
                    <span>{{ userInfo.nickname }}</span>
                </div>
                <div class="body">
                    <p>
                        <svg t="1709817416292" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="8793" width="20" height="20">
                            <path
                                d="M868.519 445.735L549.715 768.292l-228.24-230.917 318.798-322.548c1.088-1.089 2.17-1.082 3.245-0.01l225 227.65c0.532 0.543 0.65 1.185 0.65 1.638 0 0.445-0.118 1.084-0.65 1.63zM428.094 823.403c-0.168 0.04-0.55 0-0.306 0.256L267.089 661.157c-0.078-0.165-0.102-0.586-0.31-0.244l50.922-79.907 188.904 191.117-78.511 51.28z m-84.957-4.258l-28.832-0.827-57.095-57.765 30.652-31.013 71.924 72.767-16.649 16.838z m378.038-625.127L889.092 363.91c3.81 3.854 3.81 10.372-0.007 14.232l-18.622 18.84-181.98-184.121 18.623-18.843c3.808-3.854 10.26-3.854 14.069 0z m191.368 146.165L744.624 170.289c-16.8-17.01-44.165-17.01-60.968 0l-18.81 19.035c-6.407-5.55-14.395-8.718-22.944-8.718-9.478 0-18.385 3.724-25.07 10.486L274.578 537.375l19.133 19.359-54.813 86.004c-8.226 12.915-6.335 30.854 4.404 41.713l21.111 21.36-54.102 54.742 89.873 90.928 56.299 1.613 26.751-27.06 21.114 21.358c6.256 6.338 14.886 9.627 23.52 9.627 6.192 0 12.391-1.69 17.716-5.18l85.003-55.452 19.128 19.355 342.253-346.28c6.685-6.764 10.365-15.777 10.365-25.373-0.004-8.637-3.134-16.71-8.61-23.187l18.813-19.033c16.81-17.006 16.815-44.678 0.007-61.686z"
                                fill="" p-id="8794"></path>
                        </svg>
                        <span>昵称：{{ userInfo.nickname }}</span>
                    </p>
                    <p>
                        <svg t="1709817221652" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="7801" width="20" height="20">
                            <path
                                d="M467.6608 572.8256H352.8704v-89.8048c74.6496-10.0352 132.1984-73.9328 132.1984-151.2448 0-84.2752-68.3008-152.6784-152.6784-152.6784S179.712 247.5008 179.712 331.776c0 77.312 57.5488 141.312 132.1984 151.2448v89.8048H197.0176c-11.264 0-20.48 9.216-20.48 20.48s9.216 20.48 20.48 20.48h114.8928v210.6368c0 11.264 9.216 20.48 20.48 20.48s20.48-9.216 20.48-20.48V613.7856h114.8928c11.264 0 20.48-9.216 20.48-20.48-0.1024-11.264-9.3184-20.48-20.5824-20.48zM332.3904 443.4944c-29.7984 0-57.856-11.5712-78.9504-32.6656s-32.6656-49.152-32.6656-78.9504c0-29.7984 11.5712-57.856 32.6656-78.9504s49.152-32.6656 78.9504-32.6656 57.856 11.5712 78.9504 32.6656 32.6656 49.152 32.6656 78.9504c0 29.7984-11.5712 57.856-32.6656 78.9504s-49.152 32.6656-78.9504 32.6656zM715.1616 540.8768v-291.84l93.696 93.696c7.9872 7.9872 20.992 7.9872 28.9792 0 7.9872-7.9872 7.9872-20.992 0-28.9792L710.144 185.9584c-0.3072-0.3072-0.512-0.6144-0.8192-0.9216-3.9936-3.9936-9.216-5.9392-14.5408-5.9392h-0.6144c-0.512 0-1.024 0-1.536 0.1024-0.3072 0-0.7168 0.1024-1.024 0.1024-0.3072 0-0.6144 0.1024-0.9216 0.1024-0.3072 0.1024-0.6144 0.1024-0.9216 0.2048-0.4096 0.1024-0.7168 0.2048-1.1264 0.3072-0.2048 0.1024-0.4096 0.1024-0.6144 0.2048-0.512 0.2048-0.9216 0.3072-1.3312 0.512-0.1024 0-0.1024 0.1024-0.2048 0.1024-2.3552 1.024-4.5056 2.4576-6.3488 4.3008-0.3072 0.3072-0.512 0.6144-0.8192 0.9216L551.7312 313.6512c-7.9872 7.9872-7.9872 20.992 0 28.9792 7.9872 7.9872 20.992 7.9872 28.9792 0l93.4912-93.4912v291.84c-74.5472 10.0352-132.096 73.9328-132.096 151.2448 0 84.2752 68.3008 152.6784 152.6784 152.6784S847.4624 776.4992 847.4624 692.224c0-77.4144-57.5488-141.312-132.3008-151.3472z m58.5728 230.2976c-21.0944 21.0944-49.152 32.6656-78.9504 32.6656-29.7984 0-57.856-11.5712-78.9504-32.6656s-32.6656-49.152-32.6656-78.9504 11.5712-57.856 32.6656-78.9504 49.152-32.6656 78.9504-32.6656c29.7984 0 57.856 11.5712 78.9504 32.6656 21.0944 21.0944 32.6656 49.152 32.6656 78.9504s-11.4688 57.856-32.6656 78.9504z"
                                p-id="7802">
                            </path>
                        </svg>
                        <span>性别：{{ userInfo.gender }}</span>
                    </p>
                    <p>
                        <svg t="1709817506311" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="9959" width="20" height="20">
                            <path
                                d="M838.954667 234.666667H170.666667c-3.626667 0-7.168 0.448-10.56 1.322666l323.690666 323.669334a21.333333 21.333333 0 0 0 30.165334 0L838.954667 234.666667z m46.144 14.186666l-260.693334 260.693334 262.933334 262.912c5.44-7.168 8.661333-16.106667 8.661333-25.792V277.333333c0-10.944-4.117333-20.906667-10.88-28.48zM843.861333 789.333333l-249.6-249.621333-50.133333 50.133333a64 64 0 0 1-90.517333 0l-50.112-50.133333L156.373333 786.88c4.48 1.578667 9.28 2.453333 14.314667 2.453333h673.194667zM128.661333 754.218667L373.333333 509.525333 129.578667 265.813333A42.709333 42.709333 0 0 0 128 277.333333v469.333334c0 2.56 0.213333 5.098667 0.661333 7.552zM170.666667 192h682.666666a85.333333 85.333333 0 0 1 85.333334 85.333333v469.333334a85.333333 85.333333 0 0 1-85.333334 85.333333H170.666667a85.333333 85.333333 0 0 1-85.333334-85.333333V277.333333a85.333333 85.333333 0 0 1 85.333334-85.333333z"
                                fill="#333333" p-id="9960"></path>
                        </svg>
                        <span>邮箱：{{ userInfo.email }}</span>
                    </p>
                </div>
                <div class="footer">
                    <router-link to="/home/personal">
                        <p>
                            <svg t="1709817714516" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="11016" width="20" height="20">
                                <path
                                    d="M512 128.22c49.68 0 96.39 19.35 131.52 54.48C678.65 217.83 698 264.54 698 314.22s-19.35 96.39-54.48 131.52c-35.13 35.13-81.84 54.48-131.52 54.48s-96.39-19.35-131.52-54.48C345.35 410.61 326 363.91 326 314.22s19.35-96.39 54.48-131.52c35.13-35.13 81.84-54.48 131.52-54.48m0-64c-138.07 0-250 111.93-250 250s111.93 250 250 250 250-111.93 250-250-111.93-250-250-250z"
                                    p-id="11017"></path>
                                <path
                                    d="M896.21 945.07c-16.78 0-30.75-12.96-31.92-29.71-13.73-196.15-162.31-351.11-342.96-351.11-180.65 0-329.22 154.96-342.96 351.11-1.17 16.74-15.13 29.71-31.92 29.71-18.6 0-33.22-15.8-31.93-34.35 3.31-47.57 13.53-93.8 30.5-137.84 20.37-52.88 49.57-100.4 86.78-141.26 37.41-41.07 81.04-73.35 129.69-95.95 50.61-23.5 104.38-35.42 159.83-35.42 55.45 0 109.22 11.92 159.83 35.42 48.65 22.59 92.28 54.87 129.69 95.95 37.21 40.86 66.41 88.39 86.78 141.26 16.97 44.04 27.18 90.27 30.5 137.84 1.31 18.55-13.31 34.35-31.91 34.35z"
                                    p-id="11018"></path>
                            </svg>
                            <span style="color: #333;">账号设置</span>
                        </p>
                    </router-link>
                    <p>
                        <svg t="1709817084790" class="icon" viewBox="0 0 1042 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="4558" width="20" height="20">
                            <path
                                d="M581.632 697.344l126.976 0 0 194.56q0 33.792-10.24 58.88t-27.136 40.96-39.424 23.552-48.128 7.68l-452.608 0q-24.576 0-48.128-9.728t-41.472-27.136-29.184-40.96-11.264-52.224l0-706.56q0-24.576 11.776-47.104t30.208-39.936 40.96-28.16 45.056-10.752l449.536 0q26.624 0 50.176 11.776t41.472 29.696 28.16 40.448 10.24 44.032l0 188.416-126.976 0 1.024-195.584-452.608 0-1.024 713.728 452.608 0 0-195.584zM1021.952 505.856q37.888 30.72 2.048 60.416-20.48 15.36-44.544 37.888t-50.176 46.592-51.712 47.616-47.104 40.96q-23.552 18.432-40.448 18.432t-16.896-24.576q2.048-14.336 0.512-35.84t-1.536-36.864q0-17.408-12.288-21.504t-29.696-4.096l-40.96 0-62.464 0q-34.816 0-73.216-0.512t-73.216-0.512l-62.464 0-41.984 0q-8.192 0-17.92-1.536t-17.408-6.656-12.288-14.336-4.608-23.552q0-19.456-0.512-46.08t0.512-47.104q0-27.648 13.312-37.888t43.008-9.216l33.792 0 59.392 0q32.768 0 70.144 0.512t71.168 0.512l61.44 0 38.912 0q25.6 1.024 43.52-4.096t17.92-22.528q0-14.336 1.024-32.256t1.024-32.256q0-23.552 12.8-29.696t32.256 9.216q19.456 16.384 45.568 38.4t52.736 45.056 52.736 45.568 47.616 39.936z"
                                p-id="4559" fill="#d81e06"></path>
                        </svg>
                        <span style="color:red;" @click="logout()">退出登录</span>
                    </p>
                </div>
            </div>

        </el-drawer>
    </div>
</template>

<script setup lang="ts">
import { useUserStore } from '@/store/user';
import { ref, reactive, onBeforeMount,inject } from 'vue'
import { logout } from '@/api/login';
const store = useUserStore()
onBeforeMount(() => {
    Object.assign(userInfo, store.userInfo.data);
})
const drawer = ref(false)
let userInfo = reactive({
    userName:'',
    nickname:'',
    gender:'',
    email:'',
})
inject('userInfo',userInfo)
</script>

<style lang="scss" scoped>
.ava {
    position: absolute;
    top: 5px;
    right: 20px;
    background-color: #5dcfff;
    width: 40px;
    height: 40px;
    font-size: 12px;
    cursor: pointer;
    z-index: 1000;
    &:hover {
        opacity: 0.8;
    }
}
#user_info:deep(.el-overlay) {
    background: {
        opacity: 0;
        color: rgba(0, 0, 0, 0);
    }
    ;
}

#user_info:deep(.el-drawer) {
    height: 80%;
    margin-top: 80px;
    width: 330px !important;
    top: 0;
    right: 10px;
    bottom: 0;
    border-radius: 10px;
    border: 1px solid #eee;

}

:deep(.ttb) {
    left: 77%;
    height: 65% !important;
}

:deep(.el-drawer__body) {
    padding: 0;
    overflow: visible;
}

.drawer_body {
    display: flex;
    flex-direction: column;

    .header {
        height: 210px;
        display: flex;
        flex-direction: column;

        .half {
            height: 50%;
            background-color: #40a0ffc2;
            margin-top: -10px;
        }

        .avatar {
            margin: 0 auto;
            width: 60px;
            height: 60px;
            font-size: 15px;
            background-color: #fb7fb7;
            margin-top: -30px;
            border: 2px solid white;
        }

        span {
            margin-top: 20px;
            font-size: 25px;
        }
    }

    .footer,
    .body {
        display: flex;
        margin-left: 30px;
        margin-right: 30px;
        border-top: 2px solid #eee;
        flex-direction: column;
        padding: 10px 0;
        color: #333;

        p {
            display: flex;
            flex-direction: row;
            align-items: center;
            text-align: left;
            margin: 5px 0px;
            font-size: 15px;
            padding: 5px;

            span {
                cursor: pointer;
                margin-left: 5px;
            }

            &:hover {
                background-color: #f5f5f5;
            }
        }
    }
}
.keep{
    background-color: #6698ff1a;
}
</style>